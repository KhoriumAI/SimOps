graph TB
    subgraph "User Interface Layer"
        GUI["GUI Application<br/>(gui_final.py)"]
        CLI["CLI Tools<br/>(batch_mesh.py)"]
        WEB["Web Frontend<br/>(app.py)"]
    end
    
    subgraph "GUI Components"
        MAIN["ModernMeshGenGUI<br/>(main.py)"]
        VTK["VTK3DViewer<br/>(vtk_viewer.py)"]
        PAINT["PaintbrushWidget<br/>(paintbrush_widget.py)"]
        WORKER["MeshWorker<br/>(workers.py)"]
        UTILS["GUI Utils<br/>(utils.py)"]
    end
    
    subgraph "Worker Subprocess"
        SUBPROCESS["mesh_worker_subprocess.py"]
        PROGRESS["Progress Parser"]
    end
    
    subgraph "Core Engine"
        BASE["BaseMeshGenerator<br/>(mesh_generator.py)"]
        CONFIG["Config<br/>(config.py)"]
        QUALITY["MeshQualityAnalyzer<br/>(quality.py)"]
        GEOM["GeometryHealer<br/>(geometry_healer.py)"]
        CLEANUP["GeometryCleanup<br/>(geometry_cleanup.py)"]
    end
    
    subgraph "Meshing Strategies"
        EXHAUST["ExhaustiveMeshGenerator<br/>(exhaustive_strategy.py)"]
        HEX["HexDominantStrategy<br/>(hex_dominant_strategy.py)"]
        POLY["PolyhedralMeshGenerator<br/>(polyhedral_strategy.py)"]
        ADAPT["AdaptiveStrategy<br/>(adaptive_strategy.py)"]
        PARALLEL["ParallelStrategy<br/>(parallel_strategy.py)"]
        HYBRID["HybridStrategy<br/>(hybrid_strategy.py)"]
    end
    
    subgraph "Hex Pipeline Components"
        DISC["HighFidelityDiscretization"]
        COACD["ConvexDecomposition<br/>(CoACD)"]
        GLUE["TopologyGlue"]
        TETBASE["TetrahedralBaseline"]
        SUBDIV["Hex Subdivision"]
    end
    
    subgraph "Advanced Features"
        AI["AIRecommendationEngine<br/>(ai_integration.py)"]
        ANISO["AnisotropicMeshing<br/>(anisotropic_meshing.py)"]
        CURV["CurvatureAdaptive<br/>(curvature_adaptive.py)"]
        PAINTCORE["PaintbrushGeometry<br/>(paintbrush_geometry.py)"]
        FIELD["PaintbrushFieldGenerator<br/>(paintbrush_field_generator.py)"]
    end
    
    subgraph "External Libraries"
        GMSH["Gmsh<br/>(CAD Import & Meshing)"]
        TRIMESH["Trimesh<br/>(Mesh Processing)"]
        VTK_LIB["VTK/PyVista<br/>(Visualization)"]
        COACD_LIB["CoACD Library<br/>(Convex Decomposition)"]
    end
    
    subgraph "Data Flow"
        CAD["CAD Files<br/>(STEP/IGES)"]
        MESH["Mesh Files<br/>(MSH/VTK)"]
        REPORT["Quality Reports<br/>(TXT)"]
        JSON["Config/Data<br/>(JSON)"]
    end
    
    %% User Interface Connections
    GUI --> MAIN
    MAIN --> VTK
    MAIN --> PAINT
    MAIN --> WORKER
    MAIN --> UTILS
    
    %% Worker Process Flow
    WORKER --> SUBPROCESS
    SUBPROCESS --> PROGRESS
    PROGRESS --> WORKER
    
    %% Subprocess to Strategy Selection
    SUBPROCESS --> EXHAUST
    SUBPROCESS --> HEX
    SUBPROCESS --> POLY
    
    %% Strategy Inheritance
    EXHAUST --> BASE
    HEX --> BASE
    POLY --> BASE
    ADAPT --> BASE
    PARALLEL --> BASE
    HYBRID --> BASE
    
    %% Core Dependencies
    BASE --> CONFIG
    BASE --> QUALITY
    BASE --> GEOM
    BASE --> CLEANUP
    BASE --> GMSH
    
    %% Hex Pipeline Flow
    HEX --> DISC
    DISC --> COACD
    COACD --> GLUE
    GLUE --> TETBASE
    TETBASE --> SUBDIV
    
    %% External Library Dependencies
    DISC --> GMSH
    DISC --> TRIMESH
    COACD --> COACD_LIB
    GLUE --> GMSH
    TETBASE --> GMSH
    SUBDIV --> GMSH
    
    %% Advanced Features Integration
    EXHAUST --> AI
    EXHAUST --> ANISO
    EXHAUST --> CURV
    EXHAUST --> PAINTCORE
    PAINTCORE --> FIELD
    PAINT --> PAINTCORE
    
    %% Visualization
    VTK --> VTK_LIB
    VTK --> MESH
    
    %% Data Flow
    CAD --> SUBPROCESS
    SUBPROCESS --> MESH
    SUBPROCESS --> REPORT
    SUBPROCESS --> JSON
    MESH --> VTK
    
    %% CLI/Web Paths
    CLI --> SUBPROCESS
    WEB --> SUBPROCESS
    
    %% Quality Analysis
    QUALITY --> GMSH
    QUALITY --> MESH
    QUALITY --> REPORT
    
    style GUI fill:#4A90E2,stroke:#2E5C8A,color:#fff
    style MAIN fill:#4A90E2,stroke:#2E5C8A,color:#fff
    style SUBPROCESS fill:#E85D75,stroke:#B83B52,color:#fff
    style BASE fill:#50C878,stroke:#2E7D4E,color:#fff
    style EXHAUST fill:#F5A623,stroke:#C17D11,color:#fff
    style HEX fill:#F5A623,stroke:#C17D11,color:#fff
    style POLY fill:#F5A623,stroke:#C17D11,color:#fff
    style GMSH fill:#9013FE,stroke:#6B0FBE,color:#fff
    style VTK_LIB fill:#9013FE,stroke:#6B0FBE,color:#fff

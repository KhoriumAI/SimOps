{
    "InstanceIds": [
        "i-0bdb1e0eaa658cc7c"
    ],
    "DocumentName": "AWS-RunShellScript",
    "Parameters": {
        "commands": [
            "sudo chown -R ec2-user:ec2-user /home/ec2-user/backend",
            "runuser -l ec2-user -c 'git config --global --add safe.directory /home/ec2-user/backend'",
            "runuser -l ec2-user -c 'cd /home/ec2-user/backend && git reset --hard HEAD && git clean -fd'",
            "runuser -l ec2-user -c 'git -C /home/ec2-user/backend pull origin main'",
            "runuser -l ec2-user -c 'cd /home/ec2-user/backend && /home/ec2-user/backend/venv/bin/python backend/run_migration.py && /home/ec2-user/backend/venv/bin/python backend/add_user.py'",
            "sudo systemctl restart gunicorn"
        ]
    }
}